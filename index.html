---
layout: default
title: "Foto Cleone.ID"
---

<!-- Gallery -->
<div id="portfolio" class="section gray">
    <div class="b row" id="photo-container">
        <script>
            // Load images only when they appear in viewport
            function setupLazyLoading() {
                if ('IntersectionObserver' in window) {
                    const imageObserver = new IntersectionObserver((entries, observer) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                const img = entry.target;
                                img.src = img.dataset.src;
                                img.onload = () => {
                                    img.removeAttribute('data-src');
                                    // Notify masonry that this image is loaded
                                    $('#photo-container').masonry('layout');
                                };
                                observer.unobserve(img);
                            }
                        });
                    }, {
                        rootMargin: '200px 0px'  // Start loading when image is 200px from viewport
                    });
                    
                    document.querySelectorAll('img[data-src]').forEach(img => {
                        imageObserver.observe(img);
                    });
                } else {
                    // Fallback for browsers without IntersectionObserver
                    document.querySelectorAll('img[data-src]').forEach(img => {
                        img.src = img.dataset.src;
                    });
                }
            }

            fetch('https://cdn.cleone.id/foto.json')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('photo-container');
                    
                    // Sort data in descending order (assumes data has a timestamp or id field)
                    // Modify the sort key based on your actual data structure
                    data.sort((a, b) => {
                        // If you have a timestamp field, use that for sorting
                        return (b.timestamp || 0) - (a.timestamp || 0);
                        // Alternatively, if you have an ID that's sequential:
                        // return (b.id || 0) - (a.id || 0);
                    });
                    
                    data.forEach((item, index) => {
                        const div = document.createElement('div');
                        div.className = `col l4 m6 s12 gallery-item gallery-expand ce`;
                        div.innerHTML = `
                        <div class="gallery-curve-wrapper">
                            <a class="gallery-cover gray">
                                <img class="responsive-img" 
                                     data-src="${item.url}" 
                                     src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1 1'%3E%3C/svg%3E" 
                                     alt="placeholder" 
                                     crossorigin="anonymous" />
                            </a>
                            <div class="gallery-overlay spotlight" data-media="image" data-title="${item.caption}" data-src="${item.url}" data-description="${item.username}">
                                <div class="overlay-header">
                                    <div class="overlay-title">${item.caption}</div>
                                </div>
                            </div>
                            <div class="gallery-body">
                                <div class="title-wrapper">
                                    <h3>${item.caption}</h3>
                                    <span class="gj">${item.username}</span>
                                </div>
                                <p class="fi">
                                    ${item.caption}
                                </p>
                            </div>
                            <div class="gallery-action">
                                <a class="btn-floating btn-large waves-effect waves-light"><i class="material-icons">favorite</i></a>
                            </div>
                        </div>
                        `;
                        container.appendChild(div);
                    });

                    // Setup lazy loading
                    setupLazyLoading();
                    
                    // Initialize masonry layout
                    const $masonry = $('#photo-container');
                    $masonry.imagesLoaded(() => {
                        // No random shuffling here, maintaining sorted order
                        
                        // Initialize masonry
                        $masonry.masonry({
                            itemSelector: '.gallery-item',
                            columnWidth: '.gallery-item',
                            percentPosition: true
                        });
                    });
                    
                    // Initialize spotlight if needed (assuming you have spotlight.js loaded)
                    if (typeof $.spotlight === 'function') {
                        $.spotlight();
                    }
                })
                .catch(error => console.error("Failed to load gallery:", error));
        </script>
    </div>
</div>
<!-- /.container -->


<div class="fixed-action-btn click-to-toggle">
    <a id="bg-control" class="btn-floating btn-large grey darken-4 pulse tooltipped" data-position="left" data-delay="50" data-tooltip="Ambience Control">
        <i class="material-icons">music_note</i>
    </a>
    <ul>
        <li><a id="vid_control" class="btn-floating btn-large red tooltipped" onclick="playVid();" data-position="left" data-delay="50" data-tooltip="Play/Stop"><i class="material-icons large">play_arrow</i></a></li>
        <li><a class="btn-floating grey darken-3 waves-effect tooltipped" onclick="nextVideo();" data-position="left" data-delay="50" data-tooltip="Next Video"><i class="material-icons">skip_next</i></a></li>
        <li><a class="btn-floating grey darken-3 waves-effect tooltipped" onclick="prevVideo();" data-position="left" data-delay="50" data-tooltip="Previous Video"><i class="material-icons">skip_previous</i></a></li>
        <li><a class="btn-floating grey darken-3 waves-effect tooltipped" onclick="setVolume('up');" data-position="left" data-delay="50" data-tooltip="Volume Up"><i class="material-icons">volume_up</i></a></li>
        <li><a class="btn-floating grey darken-3 waves-effect tooltipped" onclick="setVolume('down');" data-position="left" data-delay="50" data-tooltip="Volume Down"><i class="material-icons">volume_down</i></a></li>
    </ul>
</div>

<!-- Tap Target Structure -->
<div class="tap-target white-text" style="background-color: #3a3a3a;" data-activates="bg-control">
    <div class="tap-target-content font-style">
        <h1>Selamat Datang</h1>
        <p>Tap Play untuk memutar Ambience Sound</p>
    </div>
</div>

